version: '2'
services:
        nginx:
                image: registry.cn-hangzhou.aliyuncs.com/findstr-vps/lnmp-nginx:latest
                ports:
                        - "443:443"
                        - "80:80"
                networks:
                        - frontend
                depends_on:
                        - php
        php:
                image: registry.cn-hangzhou.aliyuncs.com/findstr-vps/lnmp-php:latest
                volumes:
                        - wp_content:/home/wwwroot/blog.gotocoding.com/wp-content
                        - ./wp-config.php:/home/wwwroot/blog.gotocoding.com/wp-config.php
                networks:
                        - frontend
                        - backend
                depends_on:
                        - mysql
                environment:
                        WORDPRESS_DB_HOST: mysql
                        WORDPRESS_DB_USER: root
                        WORDPRESS_DB_PASSWORD: wp
                        WORDPRESS_DB_NAME: wordpress
                        WORDPRESS_DB_PREFIX: wp_
        mysql:
                image: mariadb:10.3
                networks:
                        - backend
                ports:
                        - "8806:3306"
                environment:
                        MYSQL_ROOT_PASSWORD: wp
                volumes:
                        - mysql_data:/var/lib/mysql
networks:
        frontend:
        backend:

volumes:
        mysql_data:
        wp_content:
